(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{bb2e:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("q-page",{attrs:{id:"question"}},[a("q-layout-container",{staticClass:"container"},[a("div",{staticClass:"flex row row-1 flex-center"},[a("q-tabs",{staticClass:"bg-white flex row col-xs-5 col-lg-5",staticStyle:{color:"#C2B593"},attrs:{"inline-label":"","indicator-color":"primary","active-color":"primary",breakpoint:0,align:"justify"},model:{value:t.tab,callback:function(s){t.tab=s},expression:"tab"}},[t.$q.screen.gt.sm?a("q-tab",{staticClass:"tab",attrs:{name:"all",label:"全部"}}):t._e(),t.$q.screen.gt.sm?a("q-tab",{staticClass:"tab",attrs:{name:"eat",label:"飲食"}}):t._e(),t.$q.screen.gt.sm?a("q-tab",{staticClass:"tab",attrs:{name:"life",label:"生活"}}):t._e(),t.$q.screen.gt.sm?a("q-tab",{staticClass:"tab",attrs:{name:"friend",label:"交友"}}):t._e(),t.$q.screen.gt.sm?a("q-tab",{staticClass:"tab",attrs:{name:"sick",label:"生病"}}):t._e(),t.$q.screen.gt.sm?a("q-tab",{staticClass:"tab",attrs:{name:"other",label:"其他"}}):t._e(),t.$q.screen.lt.md?a("q-btn-dropdown",{staticStyle:{"padding-left":"2rem"},attrs:{"auto-close":"",stretch:"",label:"更多分類"}},[a("q-list",[a("q-item",{attrs:{clickable:""},on:{click:function(s){t.tab="eat"}}},[a("q-item-section",[t._v("飲食")])],1),a("q-item",{attrs:{clickable:""},on:{click:function(s){t.tab="life"}}},[a("q-item-section",[t._v("生活")])],1),a("q-item",{attrs:{clickable:""},on:{click:function(s){t.tab="friend"}}},[a("q-item-section",[t._v("交友")])],1),a("q-item",{attrs:{clickable:""},on:{click:function(s){t.tab="sick"}}},[a("q-item-section",[t._v("生病")])],1),a("q-item",{attrs:{clickable:""},on:{click:function(s){t.tab="other"}}},[a("q-item-section",[t._v("其他")])],1)],1)],1):t._e()],1),a("div",{staticClass:"flex row col-xs-5 col-md-3 col-lg-3 flex-center search"},[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300"},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.filterDiscuss()}},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{id:"search-icon",name:"search"}})]},proxy:!0}]),model:{value:t.filtermodel,callback:function(s){t.filtermodel=s},expression:"filtermodel"}},[a("q-btn",{staticClass:"btn",attrs:{unelevated:"",rounded:"",label:"搜尋",type:"submit"},on:{click:function(s){return t.filterDiscuss()}}})],1)],1),a("div",{staticClass:"flex row col-xs-5 col-md-2 col-lg-2 flex-center pl"},[a("q-btn",{attrs:{id:"pedia_enter",rounded:"",icon:"emoji_objects",to:{name:"front.pedia"},label:"寵物百科"}})],1)],1)]),a("q-tab-panels",{staticClass:"tab-panels flex m-auto w-85",attrs:{animated:""},model:{value:t.tab,callback:function(s){t.tab=s},expression:"tab"}},[a("q-tab-panel",{staticClass:"flex row direction",attrs:{name:"all"}},t._l(t.filteredDiscuss,(function(s){return a("q-btn",{key:s._id,staticClass:"flex col-xs-12 col-sm-12 col-md-6 col-lg-4 qus_btn",attrs:{align:"left",value:s},on:{click:function(e){return t.discussOpen(s)}}},[a("div",{staticClass:"border"},[a("div",{staticClass:"row col-12 justify-between qus_card_top"},[a("q-chip",{staticClass:"chip",staticStyle:{"font-weight":"800"},style:t.chipBG(s.questiontype),attrs:{"text-color":"white",size:"0.9rem"}},[t._v("\n              "+t._s(s.questiontype)+"\n            ")]),a("p",{staticClass:"col-12 title"},[t._v(t._s(s.title))]),a("p",{staticClass:"des"},[t._v(t._s(s.description))]),a("div",{staticClass:"dis_date"},[t._v(t._s(new Date(s.date).toLocaleString()))])],1),a("div",{staticClass:"flex row col-12 qus_card_bottom"},[a("q-avatar",{attrs:{size:"sm"}},[a("img",{attrs:{src:e("d9fc")}})]),a("p",{staticClass:"name",staticStyle:{"margin-right":"auto"}},[t._v(t._s(s.user))]),a("p",{staticClass:"fb_length"},[t._v(t._s(s.feedback.length))])],1)])])})),1),a("q-tab-panel",{staticClass:"flex row justify-betwen",attrs:{name:"eat"}},t._l(t.eatDis,(function(s){return a("q-btn",{key:s._id,staticClass:"flex col-xs-12 col-sm-12 col-md-6 col-lg-4 qus_btn",attrs:{align:"left",value:s},on:{click:function(e){return t.discussOpen(s)}}},[a("div",{staticClass:"border"},[a("div",{staticClass:"row col-12 justify-between qus_card_top"},[a("q-chip",{staticClass:"chip",style:t.chipBG(s.questiontype),attrs:{"text-color":"white"}},[t._v("\n              "+t._s(s.questiontype)+"\n            ")]),a("p",{staticClass:"col-12 title"},[t._v(t._s(s.title))]),a("p",{staticClass:"des"},[t._v(t._s(s.description))]),a("div",{staticClass:"dis_date"},[t._v(t._s(new Date(s.date).toLocaleString()))])],1),a("div",{staticClass:"flex row col-12 qus_card_bottom"},[a("q-avatar",{attrs:{size:"sm"}},[a("img",{attrs:{src:e("d9fc")}})]),a("p",{staticClass:"name",staticStyle:{"margin-right":"auto"}},[t._v(t._s(s.user))]),a("p",{staticClass:"fb_length"},[t._v(t._s(s.feedback.length))])],1)])])})),1),a("q-tab-panel",{staticClass:"flex row justify-betwen",attrs:{name:"life"}},t._l(t.lifeDis,(function(s){return a("q-btn",{key:s._id,staticClass:"flex col-xs-12 col-sm-12 col-md-6 col-lg-4 qus_btn",attrs:{align:"left",value:s},on:{click:function(e){return t.discussOpen(s)}}},[a("div",{staticClass:"border"},[a("div",{staticClass:"row col-12 justify-between qus_card_top"},[a("q-chip",{staticClass:"chip",style:t.chipBG(s.questiontype),attrs:{"text-color":"white"}},[t._v("\n              "+t._s(s.questiontype)+"\n            ")]),a("p",{staticClass:"col-12 title"},[t._v(t._s(s.title))]),a("p",{staticClass:"des"},[t._v(t._s(s.description))]),a("div",{staticClass:"dis_date"},[t._v(t._s(new Date(s.date).toLocaleString()))])],1),a("div",{staticClass:"flex row col-12 qus_card_bottom"},[a("q-avatar",{attrs:{size:"sm"}},[a("img",{attrs:{src:e("d9fc")}})]),a("p",{staticClass:"name",staticStyle:{"margin-right":"auto"}},[t._v(t._s(s.user))]),a("p",{staticClass:"fb_length"},[t._v(t._s(s.feedback.length))])],1)])])})),1),a("q-tab-panel",{staticClass:"flex row justify-betwen",attrs:{name:"friend"}},t._l(t.friendDis,(function(s){return a("q-btn",{key:s._id,staticClass:"flex col-xs-12 col-sm-12 col-md-6 col-lg-4 qus_btn",attrs:{align:"left",value:s},on:{click:function(e){return t.discussOpen(s)}}},[a("div",{staticClass:"border"},[a("div",{staticClass:"row col-12 justify-between qus_card_top"},[a("q-chip",{staticClass:"chip",style:t.chipBG(s.questiontype),attrs:{"text-color":"white"}},[t._v("\n              "+t._s(s.questiontype)+"\n            ")]),a("p",{staticClass:"col-12 title"},[t._v(t._s(s.title))]),a("p",{staticClass:"des"},[t._v(t._s(s.description))]),a("div",{staticClass:"dis_date"},[t._v(t._s(new Date(s.date).toLocaleString()))])],1),a("div",{staticClass:"flex row col-12 qus_card_bottom"},[a("q-avatar",{attrs:{size:"sm"}},[a("img",{attrs:{src:e("d9fc")}})]),a("p",{staticClass:"name",staticStyle:{"margin-right":"auto"}},[t._v(t._s(s.user))]),a("p",{staticClass:"fb_length"},[t._v(t._s(s.feedback.length))])],1)])])})),1),a("q-tab-panel",{staticClass:"flex row justify-betwen",attrs:{name:"sick"}},t._l(t.sickDis,(function(s){return a("q-btn",{key:s._id,staticClass:"flex col-xs-12 col-sm-12 col-lg-4 qus_btn",attrs:{align:"left",value:s},on:{click:function(e){return t.discussOpen(s)}}},[a("div",{staticClass:"border"},[a("div",{staticClass:"row col-12 justify-between qus_card_top"},[a("q-chip",{staticClass:"chip",attrs:{color:"primary","text-color":"white"}},[t._v("\n              "+t._s(s.questiontype)+"\n            ")]),a("p",{staticClass:"col-12 title"},[t._v(t._s(s.title))]),a("p",{staticClass:"des"},[t._v(t._s(s.description))]),a("div",{staticClass:"dis_date"},[t._v(t._s(new Date(s.date).toLocaleString()))])],1),a("div",{staticClass:"flex row col-12 qus_card_bottom"},[a("q-avatar",{attrs:{size:"sm"}},[a("img",{attrs:{src:e("d9fc")}})]),a("p",{staticClass:"name",staticStyle:{"margin-right":"auto"}},[t._v(t._s(s.user))]),a("p",{staticClass:"fb_length"},[t._v(t._s(s.feedback.length))])],1)])])})),1),a("q-tab-panel",{staticClass:"flex row justify-betwen",attrs:{name:"other"}},t._l(t.otherDis,(function(s){return a("q-btn",{key:s._id,staticClass:"flex col-xs-12 col-sm-12 col-md-6 col-lg-4 qus_btn",attrs:{align:"left",value:s},on:{click:function(e){return t.discussOpen(s)}}},[a("div",{staticClass:"border"},[a("div",{staticClass:"row col-12 justify-between qus_card_top"},[a("q-chip",{staticClass:"chip",staticStyle:{},attrs:{"text-color":"white"}},[t._v("\n              "+t._s(s.questiontype)+"\n            ")]),a("p",{staticClass:"col-12 title"},[t._v(t._s(s.title))]),a("p",{staticClass:"des"},[t._v(t._s(s.description))]),a("div",{staticClass:"dis_date"},[t._v(t._s(new Date(s.date).toLocaleString()))])],1),a("div",{staticClass:"flex row col-12 qus_card_bottom"},[a("q-avatar",{attrs:{size:"sm"}},[a("img",{attrs:{src:e("d9fc")}})]),a("p",{staticClass:"name",staticStyle:{"margin-right":"auto"}},[t._v(t._s(s.user))]),a("p",{staticClass:"fb_length"},[t._v(t._s(s.feedback.length))])],1)])])})),1)],1),a("q-dialog",{model:{value:t.qes,callback:function(s){t.qes=s},expression:"qes"}},[a("q-card",{staticClass:"w-RWD",attrs:{id:"qes_dialog"}},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",round:"",dense:"",color:"primary"}})],1),a("q-card-section",[a("div",{staticClass:"text-h6 row justify-between"},[a("p",{staticClass:"dis_title"},[t._v(t._s(t.discussmodel.title))]),a("div",{staticClass:"row items-center"},[a("q-avatar",{attrs:{size:"1.9rem"}},[a("img",{attrs:{src:e("d9fc")}})]),a("q-btn",{staticClass:"asker",attrs:{size:"1.2rem"},on:{click:function(s){return t.askName()}}},[t._v(t._s(t.discussmodel.user))])],1)]),a("div",{staticClass:"row"},[a("q-chip",{staticClass:"chip",staticStyle:{"font-weight":"800"},style:t.chipBG(t.discussmodel.questiontype),attrs:{"text-color":"white",size:"0.9rem"}},[t._v("\n            "+t._s(t.discussmodel.questiontype)+"\n          ")]),a("div",{staticClass:"qes_date"},[t._v(t._s(new Date(t.discussmodel.date).toLocaleString()))])],1)]),a("q-card-section",{staticClass:"dis_des"},[t._v("\n        "+t._s(t.discussmodel.description)+"\n      ")]),a("q-card-section",{staticStyle:{"border-bottom":"1px solid #B4B4B4"}}),a("q-card-section",t._l(t.discussmodel.feedback,(function(s){return a("div",{key:s._id,staticClass:"fb",attrs:{value:s}},[a("div",{staticClass:"flex row align-center h-auto"},[a("q-avatar",{attrs:{size:"30px"}},[a("img",{staticClass:"col-1",attrs:{src:e("d9fc")}})]),a("q-btn",{staticClass:"col-1 fb-1",on:{click:function(e){return t.getPetFb(s)}}},[t._v(t._s(s.user))]),a("div",{staticClass:"col-7 fb-2"},[t._v(t._s(s.description))]),a("div",{staticClass:"row col-12 col-lg-3 fb-3 justify-end"},[t._v(t._s(new Date(s.date).toLocaleString()))])],1)])})),0),a("q-card-section",{staticStyle:{"border-top":"2px solid #C2B593",background:"#C2B593"}},[a("div",{staticClass:"row flex-center",staticStyle:{width:"100%"}},[a("div",{staticClass:"col-auto",staticStyle:{"padding-right":"1rem"}},[a("q-avatar",{attrs:{size:"30px"}},[a("img",{staticClass:"col-1",attrs:{src:e("d9fc")}})])],1),a("div",{staticClass:"col"},[a("form",{staticClass:"align-center",staticStyle:{width:"100%",display:"flex"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.modelFeedback,expression:"modelFeedback"}],staticClass:"fb_btn",attrs:{clearable:""},domProps:{value:t.modelFeedback},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.addfb()},input:function(s){s.target.composing||(t.modelFeedback=s.target.value)}}}),a("q-btn",{staticStyle:{width:"15%"},attrs:{outline:"",color:"white",label:"送出"},on:{click:function(s){return t.addfb()}}})],1)])])])],1)],1),a("div",{staticClass:"q-pa-md q-gutter-lg que-btn"},[a("q-btn",{staticStyle:{border:"0.5px solid white","box-shadow":"0px 0px 5px white"},attrs:{round:"",size:"35px",color:"primary"},on:{click:function(s){t.quedialog=!0}}}),a("p",[t._v("我要發問")])],1),a("q-dialog",{model:{value:t.quedialog,callback:function(s){t.quedialog=s},expression:"quedialog"}},[a("q-card",{staticClass:"flex row",attrs:{id:"quedialog"}},[a("div",{staticClass:"col-12 flex flex-center column top"},[a("div",{staticClass:"flex justify-end",staticStyle:{width:"100%"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:"",color:"white"}})],1),a("p",{staticClass:"title"},[t._v("我要發問")])]),a("div",{staticClass:"col-12 flex justify-center cloumn qes_div"},[a("q-form",{staticClass:"q-form",on:{submit:t.onSubmit}},[a("q-input",{staticClass:"input_title",attrs:{filled:"",label:"請輸入主旨"},model:{value:t.title,callback:function(s){t.title=s},expression:"title"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"col-12 select",attrs:{placeholder:"請選擇分類"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.type=s.target.multiple?e:e[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("請選擇分類")]),t._l(t.types,(function(s){return a("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])}))],2),a("q-input",{staticClass:"textarea",attrs:{filled:"",type:"textarea",color:"primary",label:"說明文字"},model:{value:t.textarea,callback:function(s){t.textarea=s},expression:"textarea"}}),a("div",{staticClass:"flex flex-center btn"},[a("q-btn",{staticStyle:{"margin-right":"1rem",width:"80px"},attrs:{rounded:"",label:"送出",type:"submit",color:"primary",size:"1.1rem"}}),a("q-btn",{staticStyle:{width:"80px"},attrs:{rounded:"",label:"重置",type:"reset",color:"accent",size:"1.1rem"}})],1)],1)],1)])],1)],1)},i=[],l=(e("e01a"),e("26e9"),e("e6cf"),{data(){return{tab:"all",discuss:[],qes:!1,modelFeedback:"",filter:"",filtermodel:"",discussmodel:{},quedialog:!1,types:["飲食","生活","交友","生病","其他"],title:"",type:"",textarea:"",allPets:[],fbUser:[],eatDis:[],lifeDis:[],friendDis:[],sickDis:[],otherDis:[]}},computed:{user(){return this.$store.state.user},getPet(){return this.allPets.filter((t=>{if(this.discussmodel.uid===t.user)return t}))},getPetFB(){return this.allPets.filter((t=>{if(this.fbUser.uid===t.user)return t}))},filteredDiscuss(){return this.discuss.filter((t=>{const s=this.filter.toUpperCase();return!!t.title.toString().toUpperCase().includes(s)||(!!t.description.toString().toUpperCase().includes(s)||(!!t.questiontype.toString().toUpperCase().includes(s)||!!t.user.toString().toUpperCase().includes(s)))}))}},methods:{discussOpen(t){this.qes=!0,this.discussmodel=t},addfb(){if(""===this.user.account)this.$swal.fire({icon:"error",title:"上傳錯誤",text:"請先登入會員",confirmButtonColor:"#C2B593",iconColor:"#8d2430"});else{const t={description:this.modelFeedback};this.axios.patch("https://petcle.herokuapp.com/discuss/fb/"+this.discussmodel._id,t).then((t=>{t.data.success?(this.discussmodel.feedback.push({description:this.modelFeedback,user:this.user.name,date:Date.now()}),this.modelFeedback=""):this.$swal.fire({icon:"error",title:"錯誤",text:"回覆失敗",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})}))}},onSubmit(){if(""===this.user.account)this.$swal.fire({icon:"error",title:"發送失敗",text:"請先登入會員",confirmButtonColor:"#C2B593",iconColor:"#8d2430"});else{const t={title:this.title,description:this.textarea,questiontype:this.type};this.axios.post("https://petcle.herokuapp.com/discuss/",t).then((t=>{t.data.success?(this.discuss.push(t.data.result),this.title="",this.textarea="",this.type=null,this.$swal.fire({icon:"success",title:"發送成功",confirmButtonColor:"#C2B593",iconColor:"#56C6BF"}),this.quedialog=!1):this.$swal.fire({icon:"error",title:"錯誤",text:"送出失敗",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})}))}},getPetFb(t){""===this.user.account?this.$swal.fire({icon:"error",title:"錯誤",text:"請先登入會員",confirmButtonColor:"#C2B593",iconColor:"#8d2430"}):(this.fbUser=t,this.$router.push(this.getPetFB[0]?"/petpage/"+this.getPetFB[0]._id:""))},filterDiscuss(t){this.filter=this.filtermodel},askName(){""===this.user.account?this.$swal.fire({icon:"error",title:"錯誤",text:"請先登入會員",confirmButtonColor:"#C2B593",iconColor:"#8d2430"}):this.$router.push(this.getPet[0]?"/petpage/"+this.getPet[0]._id:"")},chipBG(t){let s="";switch(t){case"生活":s="#56C6BF";break;case"飲食":s="#E8D38B";break;case"交友":s="#A9486B";break;case"生病":s="#548E9B";break;case"其他":s="#C2B593";break}return{background:s}}},async mounted(){await this.axios.get("https://petcle.herokuapp.com/discuss/").then((t=>{t.data.success&&(this.discuss=t.data.result.reverse(),this.discuss=t.data.result.map((t=>t)))})),await this.axios.get("https://petcle.herokuapp.com/pets/").then((t=>{t.data.success&&(this.allPets=t.data.result.map((t=>t)))})),this.eatDis=this.discuss.filter((t=>"飲食"===t.questiontype)),this.lifeDis=this.discuss.filter((t=>"生活"===t.questiontype)),this.friendDis=this.discuss.filter((t=>"交友"===t.questiontype)),this.sickDis=this.discuss.filter((t=>"生病"===t.questiontype)),this.otherDis=this.discuss.filter((t=>"其他"===t.questiontype))}}),c=l,o=e("2877"),r=e("9989"),n=e("4d5a"),d=e("429b"),u=e("7460"),p=e("f20b"),f=e("1c1c"),b=e("66e5"),m=e("4074"),_=e("27f9"),h=e("0016"),C=e("9c40"),v=e("adad"),q=e("823b"),g=e("b047"),y=e("cb32"),x=e("24e8"),w=e("f09f"),k=e("a370"),S=e("2c91"),B=e("0378"),D=e("7f67"),j=e("eebe"),Q=e.n(j),P=Object(o["a"])(c,a,i,!1,null,null,null);s["default"]=P.exports;Q()(P,"components",{QPage:r["a"],QLayout:n["a"],QTabs:d["a"],QTab:u["a"],QBtnDropdown:p["a"],QList:f["a"],QItem:b["a"],QItemSection:m["a"],QInput:_["a"],QIcon:h["a"],QBtn:C["a"],QTabPanels:v["a"],QTabPanel:q["a"],QChip:g["a"],QAvatar:y["a"],QDialog:x["a"],QCard:w["a"],QCardSection:k["a"],QSpace:S["a"],QForm:B["a"]}),Q()(P,"directives",{ClosePopup:D["a"]})},d9fc:function(t,s,e){t.exports=e.p+"img/userphoto-01.7a6dafa3.jpg"}}]);