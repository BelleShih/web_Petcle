(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"4d20":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticStyle:{padding:"1rem"},attrs:{id:"admin_new"}},[o("q-layout-container",[o("q-table",{attrs:{data:e.userPhoto,columns:e.titles,"row-key":"name","rows-per-page-option":[10,15,20],filter:e.filter},scopedSlots:e._u([{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t}},[o("q-td",{key:"file"},[o("img",{staticStyle:{height:"100px"},attrs:{src:t.row.src}})]),o("q-td",{key:"description"},[t.row.edit?o("q-input",{attrs:{outlined:"",filled:""},model:{value:t.row.modelDes,callback:function(o){e.$set(t.row,"modelDes",o)},expression:"photo.row.modelDes"}}):o("p",[e._v(e._s(t.row.description))])],1),o("q-td",{key:"actions"},[t.row.edit?e._e():o("q-btn",{staticClass:"mr-1",attrs:{round:"",icon:"edit",color:"primary",size:"0.7rem"},on:{click:function(o){return e.edit(t)}}}),t.row.edit?e._e():o("q-btn",{attrs:{round:"",icon:"delete_forever",color:"negative",size:"0.7rem"},on:{click:function(o){return e.del(t)}}}),t.row.edit?o("q-btn",{staticClass:"mr-1",attrs:{round:"",icon:"save",color:"secondary",size:"0.7rem"},on:{click:function(o){return e.save(t)}}}):e._e(),t.row.edit?o("q-btn",{attrs:{round:"",icon:"cancel",color:"accent",size:"0.7rem"},on:{click:function(o){return e.canael(t)}}}):e._e()],1)],1)]}},{key:"top-left",fn:function(){return[o("h6",{staticClass:"adminTitle"},[e._v("用戶相片管理")]),o("p",[e._v(e._s(e.user[0].name)+" | "+e._s(e.user[0].account))]),o("q-btn",{staticStyle:{width:"40px"},attrs:{rounded:"",icon:"arrow_back",color:"primary",to:{name:"admin.member"}}})]},proxy:!0},{key:"top-right",fn:function(){return[o("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"請輸入關鍵字"},scopedSlots:e._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])})],1)],1)},s=[],a=(o("e01a"),o("a434"),{data(){return{filter:"",userPhoto:[],modelDes:"",allUser:[],titles:[{name:"file",required:!0,label:"圖片",align:"left",field:"file",format:e=>`${e}`,sortable:!0},{name:"description",align:"left",label:"描述",field:"description",sortable:!0},{name:"actions",label:"編輯",align:"left"}]}},computed:{user(){return this.allUser.filter((e=>{if(this.$route.params.id===e._id)return e}))}},methods:{edit(e){e.row.edit=!0,e.modelDes=e.description},save(e){this.axios.patch("https://petcle.herokuapp.com/photos/"+e.row._id,{description:e.row.modelDes}).then((t=>{t.data.success?(e.row.edit=!1,e.row.description=e.row.modelDes,alert("保存成功")):alert(t.data.message)})).catch((e=>{console.log(e)}))},canael(e){e.row.edit=!1,e.modelDes=e.description},del(e){this.axios.delete("https://petcle.herokuapp.com/photos/"+e.row._id).then((t=>{t.data.success?(this.userPhoto.splice(e.rowIndex,1),alert("刪除成功")):alert(t.data.message)})).catch((e=>{console.log(e)}))}},mounted(){this.axios.get("https://petcle.herokuapp.com/photos/user/"+this.$route.params.id).then((e=>{e.data.success?this.userPhoto=e.data.result.map((e=>(e.src="https://petcle.herokuapp.com/photos/file/"+e.file,e.modelDes=e.description,e.breed=e.breeds,e.bodypart=e.bodyparts,e.edit=!1,delete e.breeds,delete e.bodyparts,e))):this.$swal.fire({icon:"error",title:"錯誤",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})})).catch((e=>{console.log(e)})),this.axios.get("https://petcle.herokuapp.com/users/").then((e=>{this.allUser=e.data.result.map((e=>e))}))}}),i=a,n=o("2877"),l=o("9989"),c=o("4d5a"),d=o("eaac"),p=o("bd08"),u=o("db86"),m=o("27f9"),h=o("9c40"),f=o("0016"),b=o("eebe"),w=o.n(b),y=Object(n["a"])(i,r,s,!1,null,null,null);t["default"]=y.exports;w()(y,"components",{QPage:l["a"],QLayout:c["a"],QTable:d["a"],QTr:p["a"],QTd:u["a"],QInput:m["a"],QBtn:h["a"],QIcon:f["a"]})}}]);