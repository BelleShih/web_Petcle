(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{5147:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticStyle:{padding:"1rem"},attrs:{id:"admin_new"}},[o("q-page",[o("q-table",{attrs:{data:e.discuss,columns:e.titles,"row-key":"name","rows-per-page-option":[5,7,10],filter:e.filter},scopedSlots:e._u([{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t}},[o("q-td",{key:"questiontype"},[t.row.edit?o("q-input",{attrs:{outlined:"",filled:""},model:{value:t.row.modelType,callback:function(o){e.$set(t.row,"modelType",o)},expression:"discuss.row.modelType"}}):o("p",[e._v(e._s(t.row.questiontype))])],1),o("q-td",{key:"user"},[o("p",[e._v(e._s(t.row.user))])]),o("q-td",{key:"title"},[t.row.edit?o("q-input",{attrs:{outlined:"",filled:""},model:{value:t.row.modelTitle,callback:function(o){e.$set(t.row,"modelTitle",o)},expression:"discuss.row.modelTitle"}}):o("p",[e._v(e._s(t.row.title))])],1),o("q-td",{key:"description"},[t.row.edit?o("q-input",{attrs:{outlined:"",filled:"",type:"textarea"},model:{value:t.row.modelDescription,callback:function(o){e.$set(t.row,"modelDescription",o)},expression:"discuss.row.modelDescription"}}):o("p",[e._v(e._s(t.row.description))])],1),o("q-td",{key:"date"},[e._v("\n            "+e._s(new Date(t.row.date).toLocaleString())+"\n          ")]),o("q-td",{key:"actions"},[t.row.edit?e._e():o("q-btn",{staticClass:"mr-1",attrs:{round:"",icon:"edit",color:"primary",size:"0.7rem"},on:{click:function(o){return e.edit(t)}}}),t.row.edit?e._e():o("q-btn",{attrs:{round:"",icon:"delete_forever",color:"negative",size:"0.7rem"},on:{click:function(o){return e.del(t)}}}),t.row.edit?o("q-btn",{staticClass:"mr-1",attrs:{round:"",icon:"save",color:"secondary",size:"0.7rem"},on:{click:function(o){return e.save(t)}}}):e._e(),t.row.edit?o("q-btn",{attrs:{round:"",icon:"cancel",color:"accent",size:"0.7rem"},on:{click:function(o){return e.cancel(t)}}}):e._e()],1)],1)]}},{key:"top-left",fn:function(){return[o("h6",{staticClass:"adminTitle"},[e._v("留言管理")])]},proxy:!0},{key:"top-right",fn:function(){return[o("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"請輸入關鍵字"},scopedSlots:e._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])})],1)],1)},r=[],l=(o("e01a"),o("a434"),{data(){return{filter:"",discuss:[],modelTitle:"",modelDescription:"",modelType:"",titles:[{name:"questiontype",required:!0,label:"類型",align:"left",field:"questiontype",format:e=>`${e}`,sortable:!0},{name:"user",align:"left",label:"發問人",field:"user",sortable:!0},{name:"title",align:"left",label:"主旨",field:"title",sortable:!0},{name:"description",align:"left",label:"內文",field:"description",sortable:!0},{name:"date",align:"left",label:"發佈時間",field:"date"},{name:"actions",label:"編輯",align:"left"}]}},methods:{edit(e){e.row.edit=!0,e.row.modelType=e.row.questiontype,e.row.modelTitle=e.row.title,e.row.modelDescription=e.row.description},save(e){this.axios.patch("https://petcle.herokuapp.com/discuss/"+e.row._id,{title:e.row.modelTitle,description:e.row.modelDescription,questiontype:e.row.modelType}).then((t=>{t.data.success?(e.row.edit=!1,e.row.title=e.row.modelTitle,e.row.description=e.row.modelDescription,e.row.type=e.row.modelType,alert("保存成功")):alert(t.data.message)})).catch((e=>{console.log(e)}))},del(e){this.axios.delete("https://petcle.herokuapp.com/discuss/"+e.row._id).then((t=>{t.data.success?(this.discuss.splice(e.rowIndex,1),alert("刪除成功")):alert(t.data.message)})).catch((e=>{console.log(e)}))},cancel(e){e.row.edit=!1,e.row.model=e.row.description}},mounted(){this.axios.get("https://petcle.herokuapp.com/discuss/").then((e=>{e.data.success?this.discuss=e.data.result.map((e=>(e.modelT=e.title,e.modelD=e.description,e.modelType=e.questiontype,e.edit=!1,e))):alert("錯誤")})).catch((e=>{console.log(e)}))}}),s=l,n=o("2877"),a=o("9989"),d=o("eaac"),c=o("bd08"),p=o("db86"),u=o("27f9"),m=o("9c40"),w=o("0016"),f=o("eebe"),y=o.n(f),b=Object(n["a"])(s,i,r,!1,null,null,null);t["default"]=b.exports;y()(b,"components",{QPage:a["a"],QTable:d["a"],QTr:c["a"],QTd:p["a"],QInput:u["a"],QBtn:m["a"],QIcon:w["a"]})}}]);