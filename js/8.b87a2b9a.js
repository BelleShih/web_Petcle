(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0652":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"container flex-center h-100",attrs:{id:"petpage"}},[!0===e.pageOpen?i("div",{staticClass:"row flex-center h-100 petpage_row"},[i("div",{staticClass:"flex-center column col-10 col-lg-6 box h-100 "},[i("img",{staticClass:"col-10",attrs:{src:e.petpage[0].src}}),e.petpage[0].edit?i("q-file",{staticClass:"petFile_Change",staticStyle:{"margin-bottom":"1rem"},attrs:{filled:"",label:"更換寶貝大頭照"},scopedSlots:e._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"cloud_upload"},on:{click:function(e){e.stopPropagation()}}})]},proxy:!0}],null,!1,4080092651),model:{value:e.modelfile,callback:function(t){e.modelfile=t},expression:"modelfile"}}):e._e()],1),i("div",{staticClass:"column col-10 col-lg-6 right justify-center"},[e.petpage[0].edit?e._e():i("q-icon",{staticClass:"edit_icon",attrs:{name:"edit",size:"1.5rem",color:"accent"},on:{click:function(t){return e.edit(e.petpage[0])}}}),i("div",{staticClass:"row items-center"},[e.petpage[0].edit?e._e():i("div",{staticClass:"col-sm-4 col-lg-3 name"},[e._v(e._s(e.petpage[0].name))]),e.petpage[0].edit?i("q-input",{staticClass:"name_edit",attrs:{filled:"",type:"text"},model:{value:e.petpage[0].modelName,callback:function(t){e.$set(e.petpage[0],"modelName",t)},expression:"petpage[0].modelName"}}):e._e(),i("div",{staticClass:"col-sm-2 col-lg-3 master"},[e._v("@"+e._s(e.user.name))]),e.petpage[0].edit?e._e():i("q-btn",{staticClass:"mail_btn col-sm-3 col-lg-3",attrs:{icon:"mail",color:"secondary",size:"15px",rounded:""},on:{click:function(t){e.mailDialog=!0}}},[e._v("寶貝信箱")])],1),i("div",[e.petpage[0].edit?e._e():i("p",{staticClass:"pet_des",domProps:{innerHTML:e._s(e.html(e.petpage[0].description))}}),e.petpage[0].edit?i("q-input",{attrs:{filled:"",type:"textarea"},model:{value:e.petpage[0].modelDes,callback:function(t){e.$set(e.petpage[0],"modelDes",t)},expression:"petpage[0].modelDes"}}):e._e()],1),i("div",{staticClass:"line"}),i("div",{staticClass:"row type"},[e.petpage[0].edit?e._e():i("div",{staticClass:"animal"},[e._v(e._s(e.petpage[0].animal))]),e.petpage[0].edit?e._e():i("div",{staticClass:"breed"},[e._v(e._s(e.petpage[0].breed))]),e.petpage[0].edit?i("select",{directives:[{name:"model",rawName:"v-model",value:e.animalSelected,expression:"animalSelected"}],staticClass:"col-12 col-lg-5 edit_animal",attrs:{placeholder:"選擇寶貝的動物類型"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.animalSelected=t.target.multiple?a:a[0]}}},[i("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("選擇寶貝的動物類型")]),e._l(e.animals,(function(t){return i("option",{key:t.name,domProps:{value:t.name}},[e._v(e._s(t.name))])}))],2):e._e(),e.petpage[0].edit?i("select",{directives:[{name:"model",rawName:"v-model",value:e.breedSelected,expression:"breedSelected"}],staticClass:"col-12 col-lg-6 edit_breed",attrs:{placeholder:"選擇寶貝的品種類型"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.breedSelected=t.target.multiple?a:a[0]}}},[i("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("選擇寶貝的品種類型")]),e._l(e.selectedBreed.breeds,(function(t){return i("option",{key:t.name,domProps:{value:t.name}},[e._v(e._s(t.name))])}))],2):e._e()]),i("div",{staticClass:"row justify-center",staticStyle:{height:"30px","margin-top":"1rem"}},[e.petpage[0].edit?i("q-btn",{staticClass:"col-3 pet_icon",attrs:{icon:"delete_forever",color:"negative",size:"0.8rem"},on:{click:function(t){return e.del(e.petpage[0])}}},[e._v("\n          刪除寶貝\n        ")]):e._e(),e.petpage[0].edit?i("q-btn",{staticClass:"col-3 pet_icon",attrs:{icon:"cancel",color:"accent",size:"0.8rem"},on:{click:function(t){return e.cancel(e.petpage[0])}}},[e._v("取消修改")]):e._e(),e.petpage[0].edit?i("q-btn",{staticClass:"col-3",attrs:{icon:"save",color:"secondary",size:"0.8rem"},on:{click:function(t){return e.save(e.petpage[0])}}},[e._v("儲存修改")]):e._e()],1)],1)]):i("div",{staticClass:"row flex-center h-100"},[i("div",{staticClass:"flex flex-center nopet_Page"},[i("q-btn",{staticClass:"uploadPet_btn",attrs:{outline:"",rounded:"",flat:"",icon:"arrow_circle_up",color:"primary",size:"1.2rem"},on:{click:function(t){e.uploadPet=!0}}},[e._v("上傳我的寶貝")])],1)]),i("q-dialog",{model:{value:e.uploadPet,callback:function(t){e.uploadPet=t},expression:"uploadPet"}},[i("q-card",{staticClass:"flex row",attrs:{id:"uploadPet"}},[i("div",{staticClass:"col-12 flex flex-center column top"},[i("div",{staticClass:"flex justify-end",staticStyle:{width:"100%"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:"",color:"white"}})],1),i("p",{staticClass:"title"},[e._v("上傳我的寶貝")])]),i("div",{staticClass:"col-12 flex justify-center cloumn bottom"},[i("q-form",{staticStyle:{width:"80%"},on:{submit:e.onSubmit_upload,reset:e.onReset_upload}},[i("q-file",{staticStyle:{"margin-bottom":"1rem"},attrs:{filled:"","bottom-slots":"",counter:"",label:"上傳寶貝的大頭照"},scopedSlots:e._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"cloud_upload"},on:{click:function(e){e.stopPropagation()}}})]},proxy:!0},{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){t.stopPropagation(),e.model=null}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n              *僅接受jpeg、png格式，且檔案不超過1KB\n            ")]},proxy:!0}]),model:{value:e.petFile,callback:function(t){e.petFile=t},expression:"petFile"}}),i("q-input",{attrs:{filled:"",clearable:"",type:"text",color:"primary",label:"寶貝的名字"},model:{value:e.petName,callback:function(t){e.petName=t},expression:"petName"}}),i("div",{staticClass:"flex row justify-between",staticStyle:{margin:"1rem 0"}},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.animalSelected,expression:"animalSelected"}],staticClass:"col-12 col-lg-5 ULanimaltype",attrs:{placeholder:"選擇寶貝的動物類型"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.animalSelected=t.target.multiple?a:a[0]}}},[i("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("選擇寶貝的動物種類")]),e._l(e.animals,(function(t){return i("option",{key:t.name,domProps:{value:t}},[e._v(e._s(t.name))])}))],2),i("select",{directives:[{name:"model",rawName:"v-model",value:e.breedSelected,expression:"breedSelected"}],staticClass:"col-12 col-lg-6 ULanimaltype",attrs:{placeholder:"選擇寶貝的動物品種"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.breedSelected=t.target.multiple?a:a[0]}}},[i("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("選擇寶貝的動物品種")]),e._l(e.selectedBreed2,(function(t){return i("option",{key:t.name,domProps:{value:t}},[e._v(e._s(t.name))])}))],2)]),i("q-input",{attrs:{filled:"",clearable:"",type:"textarea",color:"primary",label:"寶貝的自我介紹"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),i("div",{staticClass:"pet-btn flex flex-center"},[i("q-btn",{staticStyle:{"margin-right":"1rem"},attrs:{rounded:"",label:"上傳",type:"submit",color:"primary",size:"1.1rem"}}),i("q-btn",{attrs:{rounded:"",label:"重置",type:"reset",color:"accent",size:"1.1rem"}})],1)],1)],1)])],1),i("q-dialog",{staticClass:"flex column",attrs:{id:"mailDialog",position:"right"},model:{value:e.mailDialog,callback:function(t){e.mailDialog=t},expression:"mailDialog"}},[i("div",{staticClass:"top"},[i("q-card-section",{staticClass:"row items-center q-pb-none bg-pet02"},[i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:"",color:"white"}})],1),i("q-card-section",{staticClass:"row items-center no-wrap bg-pet02",staticStyle:{height:"100px"}},[i("div",{staticClass:"flex justify-center w-100"},[i("q-icon",{attrs:{name:"mail_outline",color:"white",size:"1.9rem",outline:""}}),i("div",{staticClass:"text-weight-bold title"},[e._v("寶貝信箱")])],1)])],1),i("div",{staticClass:"center"},[i("q-card-section",{staticClass:"column"},[i("q-input",{staticClass:"mailSearch",attrs:{borderless:"",dense:"",debounce:"300"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterMail()}},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{id:"search-icon",name:"search"}})]},proxy:!0}]),model:{value:e.filtermodel,callback:function(t){e.filtermodel=t},expression:"filtermodel"}},[i("q-btn",{staticStyle:{width:"60px"},attrs:{unelevated:"",rounded:"",label:"搜尋",type:"submit",color:"secondary"},on:{click:function(t){return e.filterMail()}}})],1),e._l(e.filteredMail,(function(t){return i("div",{key:t._id,staticClass:"row items-center newMail",attrs:{value:t}},[i("div",{staticClass:"row justify-center sender mr-auto"},[i("q-avatar",{attrs:{size:"1.8rem"}},[i("img",{attrs:{src:a("d9fc")}})]),i("q-btn",{staticClass:"senderName",on:{click:function(a){return e.senderName(t)}}},[e._v(e._s(t.sendUser))])],1),i("div",[i("q-btn",{staticClass:"mailtitle",on:{click:function(a){return e.mailOpen(t)}}},[e._v(e._s(t.title))])],1)])}))],2)],1),i("div",{staticClass:"bottom"},[i("div",{staticClass:"flex justify-center mailRecord"},[i("q-btn",{staticClass:"sendReco_btn",attrs:{flat:"",color:"primary",icon:"forward_to_inbox"},on:{click:function(t){e.mailReDialog=!0}}},[e._v("寄信紀錄")])],1)])]),i("q-dialog",{attrs:{id:"checkMail"},model:{value:e.checkMail,callback:function(t){e.checkMail=t},expression:"checkMail"}},[i("q-card",{staticClass:"mailCard"},[i("q-card-section",{staticClass:"row items-center q-pb-none"},[i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),i("q-card-section",{staticClass:"border-b1"},[i("q-avatar",{attrs:{size:"2rem"}},[i("img",{attrs:{src:a("d9fc"),alt:""}})]),i("q-btn",{staticClass:"senderName",attrs:{color:"secondary",flat:""},on:{click:function(t){return e.senderNameOpen(e.mailopen)}}},[e._v(e._s(e.mailopen.sendUser))]),i("div",{staticClass:"row items-center"},[i("p",{staticClass:"mailTitle"},[e._v(e._s(e.mailopen.title))]),i("p",{staticClass:"date"},[e._v(e._s(new Date(e.mailopen.date).toLocaleString()))])])],1),i("q-card-section",{staticClass:"border-b1"},[i("p",{staticClass:"mailDes"},[e._v(e._s(e.mailopen.description))])]),i("q-card-section",{staticClass:"flex justify-center reply"},[i("q-btn",{staticClass:"reply-btn",attrs:{icon:"reply",color:"primary"},on:{click:function(t){return e.replyMail(e.mailopen)}}},[e._v("我要回信")])],1)],1)],1),i("q-dialog",{model:{value:e.reply,callback:function(t){e.reply=t},expression:"reply"}},[i("q-card",{staticClass:"flex row",attrs:{id:"sendMail"}},[i("div",{staticClass:"col-12 flex flex-center column top"},[i("div",{staticClass:"flex justify-end",staticStyle:{width:"100%"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:"",color:"primary"}})],1),i("q-icon",{attrs:{name:"reply",color:"primary",size:"3rem"}}),i("p",{staticClass:"title"},[e._v("回信給牠")])],1),i("div",{staticClass:"col-12 flex justify-center cloumn qes_div"},[i("q-form",{staticClass:"q-form",on:{submit:e.onSubmit_reply,reset:e.onReset_reply}},[i("q-input",{staticClass:"input_title",attrs:{filled:"",label:"請輸入主旨"},model:{value:e.replyTitle,callback:function(t){e.replyTitle=t},expression:"replyTitle"}}),i("q-input",{staticClass:"textarea",attrs:{filled:"",type:"textarea",color:"primary",label:"內文"},model:{value:e.replyTextarea,callback:function(t){e.replyTextarea=t},expression:"replyTextarea"}}),i("div",{staticClass:"flex flex-center btn"},[i("q-btn",{staticStyle:{"margin-right":"1rem",width:"80px"},attrs:{rounded:"",label:"送出",type:"submit",color:"primary",size:"1.1rem"}}),i("q-btn",{staticStyle:{width:"80px"},attrs:{rounded:"",label:"重置",type:"reset",color:"accent",size:"1.1rem"}})],1)],1)],1)])],1),i("q-dialog",{staticClass:"flex column",staticStyle:{"flex-direction":"column"},attrs:{id:"mailDialog",position:"left"},model:{value:e.mailReDialog,callback:function(t){e.mailReDialog=t},expression:"mailReDialog"}},[i("div",{staticClass:"top"},[i("q-card-section",{staticClass:"row items-center q-pb-none bg-pet01"},[i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:"",color:"white"}})],1),i("q-card-section",{staticClass:"row items-center no-wrap bg-pet01",staticStyle:{height:"100px"}},[i("div",{staticClass:"flex justify-center w-100"},[i("q-icon",{attrs:{name:"forward_to_inbox",color:"white",size:"1.9rem",outline:""}}),i("div",{staticClass:"text-weight-bold title"},[e._v("寄信紀錄")])],1)])],1),i("div",{staticClass:"center",attrs:{id:"sendMails"}},[i("q-card-section",{staticClass:"column"},[i("q-input",{attrs:{borderless:"",dense:"",debounce:"300"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterMail_02()}},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{id:"search-icon",name:"search"}})]},proxy:!0}]),model:{value:e.filtermodel_02,callback:function(t){e.filtermodel_02=t},expression:"filtermodel_02"}},[i("q-btn",{staticStyle:{width:"60px"},attrs:{unelevated:"",rounded:"",label:"搜尋",type:"submit",color:"primary"},on:{click:function(t){return e.filterMail_02()}}})],1),e._l(e.filteredMail_02,(function(t){return i("div",{key:t._id,staticClass:"row items-center newMail",attrs:{value:t}},[i("div",{staticClass:"row justify-center sender mr-auto"},[i("q-icon",{staticStyle:{"padding-top":"0.4rem"},attrs:{name:"reply",label:"寄給 :",size:"1.5rem"}}),i("q-btn",{staticClass:"getName",on:{click:function(a){return e.getMailrName(t)}}},[e._v(e._s(t.forName))])],1),i("div",[i("q-btn",{staticClass:"mailtitle",on:{click:function(a){return e.reMailOpen(t)}}},[e._v(e._s(t.title))])],1)])}))],2)],1)]),i("q-dialog",{attrs:{id:"checkReMail"},model:{value:e.checkReMail,callback:function(t){e.checkReMail=t},expression:"checkReMail"}},[i("q-card",{staticClass:"mailCard"},[i("q-card-section",{staticClass:"row items-center q-pb-none"},[i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),i("q-card-section",{staticClass:"border-b1"},[i("q-avatar",{attrs:{size:"2rem"}},[i("img",{attrs:{src:a("d9fc"),alt:""}})]),i("q-btn",{staticClass:"senderName",attrs:{color:"primary",flat:""},on:{click:function(t){return e.reMailOpenUser(e.reMailopen)}}},[e._v(e._s(e.reMailopen.forName))]),i("div",{staticClass:"row items-center"},[i("p",{staticClass:"mailTitle"},[e._v(e._s(e.reMailopen.title))]),i("p",{staticClass:"date"},[e._v(e._s(new Date(e.reMailopen.date).toLocaleString()))])])],1),i("q-card-section",{staticClass:"border-b1"},[i("p",{staticClass:"mailDes"},[e._v(e._s(e.reMailopen.description))])])],1)],1)],1)},l=[],s=(a("e01a"),a("26e9"),a("a434"),a("5319"),{data(){return{petpage:[],uploadPet:!1,petFile:"",petName:"",animalSelected:"",breedSelected:"",textarea:"",animals:[],modelfile:null,mailDialog:!1,checkMail:!1,mailopen:{},allMail:[],allPets:[],sendername:[],reply:!1,replyTitle:"",replyTextarea:"",mailReDialog:!1,getmail:[],checkReMail:!1,reMailopen:{},forMail:[],getMailRecord:[],filter:"",filtermodel:"",filter_02:"",filtermodel_02:""}},computed:{user(){return this.$store.state.user},pageOpen(){let e=!1;return e=0!==this.petpage.length,e},selectedBreed2(){return this.animalSelected.breeds},selectedBreed(){return this.animals.find((e=>e.name===this.animalSelected))},animalSelected_edit(){return this.petpage[0].animal},breedSelected_edit(){return this.petpage[0].breed},getPet(){return this.allPets.filter((e=>{if(this.sendername.uid===e.user)return e}))},getPetOpen(){return this.allPets.filter((e=>{if(this.mailopen.uid===e.user)return e}))},getmailName(){return this.allPets.filter((e=>{if(this.getmail.forId===e.user)return e}))},froMailName(){return this.allPets.filter((e=>{if(this.reMailopen.forId===e.user)return e}))},filteredMail(){return this.allMail.filter((e=>{const t=this.filter.toUpperCase();return!!e.title.toString().toUpperCase().includes(t)||(!!e.description.toString().toUpperCase().includes(t)||!!e.sendUser.toString().toUpperCase().includes(t))}))},filteredMail_02(){return this.getMailRecord.filter((e=>{const t=this.filter_02.toUpperCase();return!!e.title.toString().toUpperCase().includes(t)||(!!e.description.toString().toUpperCase().includes(t)||!!e.forName.toString().toUpperCase().includes(t))}))}},methods:{onSubmit_upload(){if(this.petFile.size>1048576)this.$swal.fire({icon:"error",title:"上傳錯誤",text:"圖片太大錯誤",confirmButtonColor:"#C2B593",iconColor:"#8d2430",border:"none"});else if(this.petFile.type.includes("image")){const e=new FormData;e.append("user",this.user.user),e.append("file",this.petFile),e.append("name",this.petName),e.append("animal",this.animalSelected.name),e.append("breed",this.breedSelected.name),e.append("description",this.textarea),this.axios.post("https://petcle.herokuapp.com/pets/",e).then((e=>{e.data.success?(e.data.result.src="https://petcle.herokuapp.com/pets/file/"+e.data.result.file,e.data.result.peNname=e.data.result.name,e.data.result.des=e.data.result.description,e.data.result.animal01=e.data.result.animal,e.data.result.breeds01=e.data.result.breeds,e.data.result.edit=!1,this.petpage.push(e.data.result),this.petFile=null,this.petName="",this.animalSelected="",this.breedSelected="",this.textarea="",this.uploadPet=!1):this.$swal.fire({icon:"error",title:"上傳失敗",confirmButtonColor:"#C2B593",iconColor:"#8d2430",border:"none"})}))}else this.$swal.fire({icon:"error",title:"上傳錯誤",text:"圖片格式錯誤",confirmButtonColor:"#C2B593",iconColor:"#8d2430",border:"none"})},onReset_upload(){this.petFile=null,this.petName="",this.animalSelected="",this.breedSelected="",this.textarea=""},html(e){return e.replace(/\n/g,"<br>").replace(/(https?:\/\/[\w-.]+(:\d+)?(\/[\w/.]*)?(\?\S*)?(#\S*)?)/g,'<a href="$1" target="_blank" >$1</a>')},edit(e){e.edit=!0,this.name=e.name,this.description=e.description,this.animalSelected=e.animal,this.breedSelected=e.breed},del(e){this.axios.delete("https://petcle.herokuapp.com/pets/"+e._id).then((e=>{e.data.success?this.petpage.splice(0,1):this.$swal.fire({icon:"error",title:"刪除失敗",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})})).catch((e=>{console.log(e)}))},cancel(e){e.edit=!1,e.modelDes=e.description,e.modelName=e.name,this.animalSelected=e.animal,this.breedSelected=e.breed},save(e){if(""===this.animalSelected||""===this.breedSelected)this.$swal.fire({icon:"error",title:"更新錯誤",text:"請輸入動物種類 或 品種種類",confirmButtonColor:"#C2B593",iconColor:"#8d2430"});else{this.modelfile&&(this.modelfile.size>1048576?this.$swal.fire({icon:"error",title:"更新錯誤",text:"圖片太大",confirmButtonColor:"#C2B593",iconColor:"#8d2430"}):this.modelfile.type.includes("image")||this.$swal.fire({icon:"error",title:"更新錯誤",text:"檔案格式錯誤",confirmButtonColor:"#C2B593",iconColor:"#8d2430"}));const t=new FormData;t.append("file",this.modelfile),t.append("name",e.modelName),t.append("animal",this.animalSelected),t.append("breed",this.breedSelected),t.append("description",this.petpage[0].modelDes),this.axios.patch("https://petcle.herokuapp.com/pets/"+e._id,t).then((t=>{t.data.success?(console.log(t.data.result.file),e.edit=!1,e.src="https://petcle.herokuapp.com/pets/file/"+t.data.result.file,e.file=t.data.result.file,e.name=e.modelName,e.animal=this.animalSelected,e.breed=this.breedSelected,e.description=e.modelDes):this.$swal.fire({icon:"error",title:"更新失敗",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})})).catch((e=>{console.log(e)}))}},mailOpen(e){this.checkMail=!0,this.mailopen=e},senderName(e){this.sendername=e,this.$router.push(this.getPet[0]?"/petpage/"+this.getPet[0]._id:"")},senderNameOpen(e){this.$router.push(this.getPetOpen[0]?"/petpage/"+this.getPetOpen[0]._id:"")},replyMail(e){this.reply=!0},onSubmit_reply(e){if(""===this.replyTitle||""===this.replyTextarea)this.$swal.fire({icon:"error",title:"錯誤",text:"主旨或內文不可空白",confirmButtonColor:"#C2B593",iconColor:"#8d2430"});else{const e={title:this.replyTitle,description:this.replyTextarea},t={name:this.mailopen.sendUser,_id:this.mailopen.uid,title:this.replyTitle,description:this.replyTextarea};this.axios.patch("https://petcle.herokuapp.com/pets/mail/"+this.getPetOpen[0]._id,e).then((e=>{e.data.success?(this.$swal.fire({icon:"success",title:"成功送出",confirmButtonColor:"#C2B593",iconColor:"#56C6BF"}),this.replyTitle="",this.replyTextarea="",this.reply=!1,this.checkMail=!1):this.$swal.fire({icon:"error",title:"送出失敗",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})})),this.axios.patch("https://petcle.herokuapp.com/pets/sendMail/"+this.petpage[0]._id,t)}},onReset_reply(){this.replyText="",this.replyTextarea=""},getMailrName(e){this.getmail=e,this.$router.push(this.getmailName[0]?"/petpage/"+this.getmailName[0]._id:"")},reMailOpen(e){this.checkReMail=!0,this.reMailopen=e},reMailOpenUser(e){this.$router.push(this.froMailName[0]?"/petpage/"+this.froMailName[0]._id:"")},filterMail(e){this.filter=this.filtermodel},filterMail_02(e){this.filter_02=this.filtermodel_02}},mounted(){this.axios.get("https://petcle.herokuapp.com/animals/").then((e=>{e.data.success?this.animals=e.data.result:this.$swal.fire({icon:"error",title:"錯誤",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})})).catch((e=>{console.log(e)})),this.axios.get("https://petcle.herokuapp.com/pets/user/"+this.user.id).then((e=>{e.data.success?(this.allMail=e.data.result[0].mails.reverse(),this.getMailRecord=e.data.result[0].sendMails.reverse(),this.petpage=e.data.result.map((e=>(e.src="https://petcle.herokuapp.com/pets/file/"+e.file,e.modelfile=null,e.modelDes=e.description,e.modelName=e.name,e.modelAnimal=e.animal,e.modelBreed=e.breed,e.edit=!1,e)))):this.$swal.fire({icon:"error",title:"錯誤",text:"檔案格式錯誤",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})})).catch((e=>{console.log(e)})),this.axios.get("https://petcle.herokuapp.com/pets/").then((e=>{e.data.success&&(this.allPets=e.data.result.map((e=>e)))}))}}),r=s,o=a("2877"),n=a("9989"),c=a("7d53"),p=a("0016"),d=a("27f9"),m=a("9c40"),u=a("24e8"),f=a("f09f"),h=a("0378"),v=a("a370"),g=a("2c91"),_=a("cb32"),C=a("7f67"),b=a("eebe"),y=a.n(b),x=Object(o["a"])(r,i,l,!1,null,null,null);t["default"]=x.exports;y()(x,"components",{QPage:n["a"],QFile:c["a"],QIcon:p["a"],QInput:d["a"],QBtn:m["a"],QDialog:u["a"],QCard:f["a"],QForm:h["a"],QCardSection:v["a"],QSpace:g["a"],QAvatar:_["a"]}),y()(x,"directives",{ClosePopup:C["a"]})},d9fc:function(e,t,a){e.exports=a.p+"img/userphoto-01.7a6dafa3.jpg"}}]);