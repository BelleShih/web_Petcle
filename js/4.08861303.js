(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"30b6":function(t,e,s){t.exports=s.p+"img/petcle-logo.6efc3235.png"},"588b":function(t,e,s){t.exports=s.p+"img/petcle-logo-w.d2df42f4.png"},"713b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{staticStyle:{width:"100%"},attrs:{id:"mainLayout"}},[a("q-header",{staticClass:"bg-white",staticStyle:{width:"100%"},attrs:{elevated:"","height-hint":"98"}},[a("div",{staticClass:"flex row wrap justify-between nav-padding"},[a("div",{staticClass:"col-xs-12 col-sm-12 col-md-4 col-lg-4 row flex-left flex-logo-justify"},[a("q-btn",{attrs:{dense:"",unelevated:"",exact:"",to:{name:"front.index"}}},[a("img",{attrs:{id:"logo",src:s("30b6")}})])],1),a("ul",{staticClass:"flex row col-xs-12 col-sm-12 col-md-6 col-xl-6",attrs:{id:"nav"}},[a("li",[a("q-btn",{attrs:{dense:"",unelevated:"",exact:"",to:{name:"front.about"},"active-class":"text-blue-3"}},[t._v("關於 Petcle")])],1),a("li",[a("q-btn",{attrs:{dense:"",unelevated:"",exact:"",to:{name:"front.news"},"active-class":"text-blue-3"}},[t._v("最新消息")])],1),a("li",[a("q-btn",{attrs:{dense:"",unelevated:"",exact:"",to:{name:"front.questions"}}},[t._v("毛孩大小事")])],1),a("li",{staticClass:"nav_line",attrs:{dense:"",unelevated:"",exact:""}}),a("li",[0===t.user.id.length?a("q-btn",{attrs:{dense:"",unelevated:"",exact:"","active-class":"text-blue-3"},on:{click:function(e){t.loginPage=!0}}},[t._v("登入")]):t._e(),t.user.id.length>0?a("q-btn",{attrs:{dense:"",unelevated:"",exact:"","active-class":"text-blue-3"},on:{click:t.logout}},[t._v("登出")]):t._e()],1),a("li",[0===t.user.id.length?a("q-btn",{attrs:{dense:"",unelevated:"",exact:"","active-class":"text-blue-3"},on:{click:function(e){t.registeredPage=!0}}},[t._v("註冊")]):t._e(),t.user.id.length>0?a("q-btn-dropdown",{attrs:{dense:"",unelevated:"",exact:"","active-class":"text-blue-3",label:t.user.name}},[a("q-list",{staticStyle:{background:"#C2B593",color:"white"}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"user_row",staticStyle:{"padding-top":"1rem"},attrs:{clickable:"",to:{name:"front.mypage"}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"account_box",color:"white","text-color":"white",size:"1.5rem"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"user_menu"},[t._v("我的主頁")])],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"user_row",attrs:{clickable:"",to:{name:"front.space"}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"star_rate",color:"white","text-color":"white",size:"1.5rem"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"user_menu"},[t._v("療癒空間")])],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"user_row",attrs:{clickable:"",to:{name:"front.petpage"}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"pets",color:"white","text-color":"white",size:"1.5rem"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"user_menu"},[t._v("我的寶貝")])],1)],1)],1)],1):t._e()],1),t.user.id.length>0&&!0===t.admin?a("li",[a("q-btn",{attrs:{dense:"",unelevated:"",exact:"","active-class":"text-blue-3",to:{name:"admin.index"}}},[t._v("管理後台")])],1):t._e()])])]),a("q-dialog",{staticStyle:{width:"100%"},model:{value:t.registeredPage,callback:function(e){t.registeredPage=e},expression:"registeredPage"}},[a("q-card",{staticClass:"flex row",attrs:{id:"reg_dialog"}},[a("q-card-section",{staticClass:"col-xs-12 col-sm-12 col-md-5 col-xl-5 left"},[a("div",{staticClass:"flex flex-center q-my-md column welcome"},[t._v("\n          WELCOME\n          "),a("img",{attrs:{id:"registered-logo",src:s("588b")}}),a("div",{staticClass:"registered-font col-12"},[t._v("會員註冊")])])]),a("q-card-section",{staticClass:"col-xs-12 col-sm-12 col-md-7 col-xl-7 flex flex-center column"},[a("q-form",{staticClass:"flex justify-center registered-form",on:{submit:function(e){return e.preventDefault(),t.onSubmit_reg(e)},reset:t.onReset_reg}},[a("div",{staticClass:"registered-input row flex-center"},[a("div",{staticClass:"account_text col-3"},[t._v("名稱")]),a("q-input",{staticClass:"input col-7",attrs:{placeholder:"請輸入名稱",type:"text",state:t.nameState,required:"",rules:[function(t){return!!t||"* 必填"}]},model:{value:t.reg.name,callback:function(e){t.$set(t.reg,"name",e)},expression:"reg.name"}})],1),a("div",{staticClass:"registered-input row flex-center"},[a("div",{staticClass:"account_text col-3"},[t._v("帳號")]),a("q-input",{staticClass:"input col-7",attrs:{placeholder:"請輸入帳號",type:"text",state:t.accountState_reg,required:"",rules:[function(t){return!!t||"* 必填"},function(t){return t&&t.length>=4||"帳號為4個字(含)以上"}]},model:{value:t.reg.account,callback:function(e){t.$set(t.reg,"account",e)},expression:"reg.account"}})],1),a("div",{staticClass:"registered-input row flex-center"},[a("div",{staticClass:"account_text col-3"},[t._v("密碼")]),a("q-input",{staticClass:"input col-7",attrs:{placeholder:"請輸入密碼",type:"password",state:t.passwordState_reg,required:"",rules:[function(t){return!!t||"* 必填"},function(t){return t&&t.length>=4||"密碼為4個字(含)以上"}]},model:{value:t.reg.password1,callback:function(e){t.$set(t.reg,"password1",e)},expression:"reg.password1"}})],1),a("div",{staticClass:"registered-input row flex-center"},[a("div",{staticClass:"account_text col-3"},[t._v("確認密碼")]),a("q-input",{staticClass:"input col-7",attrs:{placeholder:"請再次輸入密碼",type:"password",required:"",rules:[function(t){return!!t||"* 請再次輸入密碼"}]},model:{value:t.reg.password2,callback:function(e){t.$set(t.reg,"password2",e)},expression:"reg.password2"}})],1),a("div",{staticClass:"registered-input row flex-center"},[a("div",{staticClass:"account_text col-3"},[t._v("E-MAIL")]),a("q-input",{staticClass:"input col-7",attrs:{placeholder:"請輸入Email",type:"email",state:t.emailState,required:"",rules:[function(t){return!!t||"* 必填"},function(t){return t.includes("@")||"請輸入電子信箱正確格式"}]},model:{value:t.reg.email,callback:function(e){t.$set(t.reg,"email",e)},expression:"reg.email"}})],1),a("div",{staticClass:"registered-input row flex-center"},[a("div",{staticClass:"account_text col-3"},[t._v("是否有養寵物")]),a("div",{staticClass:"input col-7"},[a("q-radio",{attrs:{type:"radio",val:!0,label:"是"},model:{value:t.reg.pet,callback:function(e){t.$set(t.reg,"pet",e)},expression:"reg.pet"}}),a("q-radio",{attrs:{type:"radio",val:!1,label:"否"},model:{value:t.reg.pet,callback:function(e){t.$set(t.reg,"pet",e)},expression:"reg.pet"}})],1)]),a("div",{staticClass:"registered-btn flex flex-center"},[a("q-btn",{staticStyle:{"margin-right":"1rem",width:"80px"},attrs:{rounded:"",label:"註冊",type:"submit",color:"primary",size:"1.1rem"}}),a("q-btn",{staticStyle:{width:"80px"},attrs:{rounded:"",label:"重置",type:"reset",color:"accent",size:"1.1rem"}})],1)])],1)],1)],1),a("q-dialog",{attrs:{id:"login"},model:{value:t.loginPage,callback:function(e){t.loginPage=e},expression:"loginPage"}},[a("q-card",{staticStyle:{width:"500px","max-width":"80vw",height:"600px"}},[a("q-card-section",[a("div",{staticClass:"flex flex-center q-my-md"},[a("img",{attrs:{id:"logo-login",src:s("30b6")}})])]),a("q-card-section",{staticClass:"q-pt-none flex flex-center column"},[a("div",{staticClass:"login-line"}),a("div",{staticClass:"login-font"},[t._v("會員登入")]),a("div",{staticClass:"login-line"})]),a("div",{staticClass:"q-pa-md flex justify-around login-input-div"},[a("q-form",{staticClass:"q-gutter-md flex  flex-center",on:{submit:t.onSubmit_log,reset:t.onReset_log}},[a("div",{staticClass:"row flex-center login-input"},[a("div",{staticClass:"account_text col-2"},[t._v("帳號")]),a("q-input",{staticClass:"input col-6",attrs:{placeholder:"請輸入帳號",type:"text",state:t.accountState,required:"",rules:[function(t){return!!t||"* 必填"},function(t){return t&&t.length>3||"帳號為3個字以上"}]},model:{value:t.log.account,callback:function(e){t.$set(t.log,"account",e)},expression:"log.account"}})],1),a("div",{staticClass:"row flex-center login-input"},[a("div",{staticClass:"account_text col-2"},[t._v("密碼")]),a("q-input",{staticClass:"input col-6",attrs:{placeholder:"請輸入密碼",type:"password",state:t.passwordState,required:"",rules:[function(t){return!!t||"* 必填"},function(t){return t&&t.length>3||"密碼為3個字以上"}]},model:{value:t.log.password,callback:function(e){t.$set(t.log,"password",e)},expression:"log.password"}})],1),a("div",{staticClass:"text-center",attrs:{id:"no-member-text"}},[a("a",{on:{click:function(e){t.registeredPage=!0,t.loginPage=!1}}},[t._v("\n              還不是會員嗎?趕快按我註冊\n            ")])]),a("div",{staticClass:"login-line"}),a("div",{staticClass:"login-btn flex flex-center"},[a("q-btn",{staticStyle:{"margin-right":"1rem",width:"80px"},attrs:{rounded:"",label:"登入",type:"submit",color:"secondary",size:"1.1rem"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit_log()}}}),a("q-btn",{staticStyle:{width:"80px"},attrs:{rounded:"",label:"重置",type:"reset",color:"accent",size:"1.1rem"}})],1)])],1)],1)],1),a("q-page-container",[a("router-view")],1),a("q-footer",{attrs:{id:"footer"}},[a("div",{staticClass:"footer"},[a("div",{staticClass:"flex row justify-between",staticStyle:{margin:"50px 0",width:"100%"}},[a("div",{staticClass:"flex column col-xs-10 col-sm-10 col-md-5 col-lg-5 col-xl-5 left"},[a("q-icon",{staticStyle:{"margin-bottom":"1rem"},attrs:{name:"facebook",size:"45px"}}),a("p",[t._v("Copyright © 2020 Petcle. All rights reserved.")])],1),a("div",{staticClass:"col-xs-10 col-sm-10 col-md-5 col-lg-2 col-xl-2 footer_col"},[a("h6",[t._v("Petcle")]),a("ul",{staticClass:"footer_li"},[a("li",[t._v("service@petcle.com")]),a("li",[t._v("(270) 555-0117")]),a("li",[t._v("3517 W. Gray St. Utica, Pennsylvania")])])]),a("div",{staticClass:"col-xs-10 col-sm-10 col-md-5 col-lg-2 col-xl-2 footer_col"},[a("h6",[t._v("毛孩大小事")]),a("q-list",{staticClass:"footer_li"},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",to:{name:"front.questions"}}},[a("q-item-section",[t._v("網友疑問")])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",to:{name:"front.news"}}},[a("q-item-section",[t._v("最新消息")])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",to:{name:"front.pedia"}}},[a("q-item-section",[t._v("寵物百科")])],1)],1)],1),a("div",{staticClass:"col-xs-10 col-sm-10 col-md-5 col-lg-2 col-xl-2 footer_col"},[a("h6",[t._v("網站會員")]),a("q-list",{staticClass:"footer_li"},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",to:{name:"front.index"}},on:{click:function(e){t.loginPage=!0}}},[a("q-item-section",[t._v("登入會員")])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",to:{name:"front.index"}},on:{click:function(e){t.registeredPage=!0}}},[a("q-item-section",[t._v("註冊會員")])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",[t._v("會員權益與條款")])],1)],1)],1)])])])],1)},i=[],o={name:"MainLayout",data(){return{reg:{name:"",account:"",password1:"",password2:"",email:"",pet:null},log:{account:"",password:""},accept:!1,loginPage:!1,registeredPage:!1}},computed:{accountState(){return 0===this.log.account.length?null:this.log.account.length>=4&&this.log.account.length<=20},passwordState(){return 0===this.log.password.length?null:this.log.password.length>=4&&this.log.password.length<=20},nameState(){return 0===this.reg.name.length?null:this.reg.name.length>=1&&this.reg.name.length<=20},accountState_reg(){return 0===this.reg.account.length?null:this.reg.account.length>=4&&this.reg.account.length<=20},passwordState_reg(){return 0===this.reg.password1.length?null:this.reg.password1.length>=4&&this.reg.password1.length<=20&&this.reg.password1===this.reg.password2},emailState(){return 0===this.reg.email.length?null:this.reg.email.length>=1},user(){return this.$store.state.user},admin(){return"admin"===this.user.account}},methods:{onSubmit_reg(){this.reg.password1!==this.reg.password2&&this.$swal.fire({icon:"error",title:"註冊失敗",text:"密碼認證不一致",confirmButtonColor:"#C2B593",iconColor:"#8d2430"}),null===this.reg.pet&&this.$swal.fire({icon:"error",title:"註冊失敗",text:"請選擇寵物狀態",confirmButtonColor:"#C2B593",iconColor:"#8d2430"}),this.reg.password1===this.reg.password2&&this.accountState_reg&&this.passwordState_reg&&this.nameState&&this.emailState&&null!==this.reg.pet&&this.axios.post("https://petcle.herokuapp.com/users/",this.reg).then((t=>{t.data.success?(this.$swal.fire({icon:"success",title:"註冊成功",confirmButtonColor:"#C2B593",iconColor:"#56C6BF"}),this.registeredPage=!1,this.log.account="",this.log.password="",this.loginPage=!0):this.$swal.fire({icon:"error",title:"發生錯誤",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})})).catch((t=>{console.log(t.response.data.message)}))},onSubmit_log(){this.accountState&&this.passwordState&&this.axios.post("https://petcle.herokuapp.com/users/login",this.log).then((t=>{t.data.success?(this.$store.commit("login",t.data.result),this.$swal.fire({icon:"success",title:"登入成功",confirmButtonColor:"#C2B593",iconColor:"#56C6BF"}),this.log.account="",this.log.password="",this.loginPage=!1,this.$router.push("/index")):this.$swal.fire({icon:"error",title:"錯誤",text:"登入失敗",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})})).catch((t=>{console.log(t.response.data.message)}))},onReset_log(){this.account="",this.password=""},onReset_reg(){this.reg.name="",this.reg.account="",this.reg.password1="",this.reg.password2="",this.reg.email="",this.reg.pet=null},logout(){this.axios.delete("https://petcle.herokuapp.com/users/logout").then((t=>{t.data.success?(this.$swal.fire({icon:"success",title:"登出成功",confirmButtonColor:"#C2B593",iconColor:"#56C6BF"}),this.$store.commit("logout"),"/"!==this.$router.path&&this.$router.push("/index")):this.$swal.fire({icon:"error",title:"錯誤",text:"登出錯誤",confirmButtonColor:"#C2B593",iconColor:"#8d2430"})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))},heartbeat(){this.axios.get("https://petcle.herokuapp.com/users/heartbeat").then((t=>{this.user.id.length>0&&(t.data||(this.$swal.fire({icon:"error",title:"錯誤",text:"登入時效已過",confirmButtonColor:"#C2B593",iconColor:"#8d2430"}),this.$store.commit("logout"),"/"!==this.$route.path&&this.$router.push("/index")))})).catch((()=>{this.$swal.fire({icon:"error",title:"發生錯誤",confirmButtonColor:"#C2B593",iconColor:"#8d2430"}),this.$store.commit("logout"),"/"!==this.$route.path&&this.$router.push("/index")}))}},mounted(){this.heartbeat(),setInterval((()=>{this.heartbeat()}),5e3)}},l=o,r=s("2877"),n=s("4d5a"),c=s("e359"),u=s("9c40"),d=s("f20b"),p=s("1c1c"),g=s("66e5"),m=s("4074"),h=s("0016"),v=s("0170"),f=s("24e8"),x=s("f09f"),w=s("a370"),C=s("0378"),b=s("27f9"),_=s("3786"),q=s("09e3"),y=s("7ff0"),k=s("7f67"),S=s("714f"),$=s("eebe"),B=s.n($),P=Object(r["a"])(l,a,i,!1,null,null,null);e["default"]=P.exports;B()(P,"components",{QLayout:n["a"],QHeader:c["a"],QBtn:u["a"],QBtnDropdown:d["a"],QList:p["a"],QItem:g["a"],QItemSection:m["a"],QIcon:h["a"],QItemLabel:v["a"],QDialog:f["a"],QCard:x["a"],QCardSection:w["a"],QForm:C["a"],QInput:b["a"],QRadio:_["a"],QPageContainer:q["a"],QFooter:y["a"]}),B()(P,"directives",{ClosePopup:k["a"],Ripple:S["a"]})}}]);